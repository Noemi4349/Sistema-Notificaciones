# ==================================================
# CONFIGURACIÃ“N GENERAL
# ==================================================
spring.application.name=login
server.port=8081


eureka.client.serviceUrl.defaultZone = http://localhost:8761/eureka
eureka.client.register-with-eureka=true
eureka.client.fetch-registry=true
eureka.client.enabled=true

eureka.client.registry-fetch-interval-seconds=30
eureka.instance.lease-renewal-interval-in-seconds=10
eureka.instance.lease-expiration-duration-in-seconds=30
eureka.client.eureka-server-connect-timeout-seconds=60
eureka.client.eureka-server-read-timeout-seconds=60

eureka.client.initial-instance-info-replication-interval-seconds=15
eureka.client.instance-info-replication-interval-seconds=15

eureka.instance.homePageUrl=http://localhost:8081/
eureka.instance.statusPageUrl=http://localhost:8081/ 
eureka.instance.hostname=login
# ==================================================
# CONFIGURACIÃ“N DE BASE DE DATOS POSTGRESQL
# ==================================================
spring.datasource.url=jdbc:postgresql://localhost:5432/login
spring.datasource.username=postgres
spring.datasource.password=8509603
spring.datasource.driver-class-name=org.postgresql.Driver

# Mostrar las consultas SQL en la consola
spring.jpa.show-sql=true
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE

# Actualizar automÃ¡ticamente las tablas segÃºn las entidades
spring.jpa.hibernate.ddl-auto=update

# Dialecto de PostgreSQL
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect

# ConfiguraciÃ³n adicional para PostgreSQL (evita problemas con LOBs)
spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true

# ==================================================
# CONFIGURACIÃ“N JWT (MANTENER)
# ==================================================
jwt.secret=404E635266556A586E3272357538782F413F4428472B4B6250645367566B5970
jwt.expiration=86400000

# ==================================================
# CONFIGURACIÃ“N DE ARCHIVOS MULTIMEDIA (CUMPLEAÃ‘OS)
# ==================================================
# Subida de archivos (imÃ¡genes y videos)
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=16MB
spring.servlet.multipart.max-request-size=16MB

# Ruta donde se guardarÃ¡n los archivos multimedia
app.upload.dir=${user.home}/uploads/cumpleanos

# TamaÃ±o mÃ¡ximo permitido por archivo (en bytes)
app.upload.max-size=16777216

# ==================================================
# CONFIGURACIÃ“N DE APIs EXTERNAS
# ==================================================
# URL de tu API existente de socios
app.socios.api.url=http://10.1.0.207:8080/integrado/api/gbage/sel

# URL del bot de WhatsApp (Node.js)
app.whatsapp.bot.url=http://localhost:3000/api/whatsapp

# ==================================================
# CONFIGURACIÃ“N DE WHATSAPP BUSINESS API (NUEVO)
# ==================================================
# OPCIÃ“N 1: Si usas WhatsApp Business API oficial de Meta
# Descomenta estas lÃ­neas si obtienes credenciales de Meta
# whatsapp.api.url=https://graph.facebook.com/v18.0
# whatsapp.api.token=TU_TOKEN_DE_WHATSAPP_AQUI
# whatsapp.phone.number.id=TU_PHONE_NUMBER_ID_AQUI

# OPCIÃ“N 2: Si usas tu bot de Node.js (RECOMENDADO para ti)
# Ya tienes: app.whatsapp.bot.url=http://localhost:3000/api/whatsapp
# No necesitas las configuraciones de arriba
# ConfiguraciÃ³n del Bot de WhatsApp
# Modo prueba - simula envÃ­os exitosos
app.whatsapp.bot.enabled=false
app.whatsapp.bot.url=http://localhost:3000

# O si tu bot estÃ¡ en otro puerto:
# app.whatsapp.bot.url=http://localhost:5000

# ========== CONFIGURACIÃ“N DE SCHEDULER ==========
# Habilitar/deshabilitar scheduler automÃ¡tico
app.cumpleanos.scheduler.enabled=true

# Zona horaria (importante para que la hora sea correcta)
spring.jackson.time-zone=America/La_Paz

# Habilitar scheduling en Spring Boot (ya deberÃ­a estar)
spring.task.scheduling.pool.size=5



# ==================================================
# CONFIGURACIÃ“N DEL SCHEDULER (NUEVO - OBLIGATORIO)
# ==================================================
# Habilitar tareas programadas para envÃ­o automÃ¡tico
spring.task.scheduling.enabled=true
spring.task.scheduling.pool.size=5

# ==================================================
# CONFIGURACIÃ“N DE ZONA HORARIA (NUEVO - IMPORTANTE)
# ==================================================
# Para que los envÃ­os programados funcionen correctamente
spring.jpa.properties.hibernate.jdbc.time_zone=America/La_Paz

# ==================================================
# CONFIGURACIÃ“N DE LOGS (MEJORADA)
# ==================================================
logging.level.root=INFO
logging.level.bo.sanmartin=DEBUG
logging.level.org.springframework.web=DEBUG
logging.level.org.springframework.scheduling=DEBUG
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n

# ==================================================
# CONFIGURACIÃ“N DE CORS (OPCIONAL)
# ==================================================
# Si tu frontend estÃ¡ en otro puerto, descomenta:
# spring.web.cors.allowed-origins=http://localhost:4200,http://localhost:3000
# spring.web.cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS
# spring.web.cors.allowed-headers=*
# spring.web.cors.allow-credentials=true

# ==================================================
# NOTAS IMPORTANTES
# ==================================================
# âœ… Ya tienes todo configurado correctamente
# âœ… El directorio de uploads se crearÃ¡ automÃ¡ticamente
# âœ… UsarÃ¡s tu bot de Node.js para enviar WhatsApp
# âœ… El scheduler se ejecutarÃ¡ automÃ¡ticamente cada minuto
# âœ… La zona horaria estÃ¡ configurada para Bolivia (La Paz)

# CONFIGURACIÃ“N DE RECORDATORIOS
# ==============================================
# Mensaje por defecto para recordatorios
recordatorio.mensaje.default=ðŸ“¢ RECORDATORIO DE CUOTA\n\nEstimado cliente, le recordamos que su prÃ³xima cuota estÃ¡ prÃ³xima a vencer.\n\nPor favor, realice su aporte a la brevedad posible.\n\nÂ¡Gracias por su puntualidad! ðŸ’™

# DÃ­as de anticipaciÃ³n para enviar recordatorios
recordatorio.dias.anticipacion=3

# ==============================================
# CONFIGURACIÃ“N DE TAREAS PROGRAMADAS
# ==============================================
spring.task.scheduling.pool.size=5

# ==============================================
# CONFIGURACIÃ“N DE MULTIPART (para archivos)
# ==============================================
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB